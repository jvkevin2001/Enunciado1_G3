@{
    var venta = ViewBag.Venta;
    var detalles = ViewBag.Detalles as List<ProyectoFinal_G3.Models.DetalleVenta>;
}

<h2 class="text-white">Venta #@venta?.Id_Venta</h2>

<p class="text-light">
    Cliente: @(venta?.Cliente?.NombreCliente ?? "Sin cliente")
</p>
<p class="text-light">
    Fecha: @(venta?.FechaVenta.ToString("yyyy-MM-dd") ?? "Fecha no disponible")
</p>
<p class="text-light">
    Total: ₡@(venta?.Total ?? 0)
</p>

<h4 class="text-white mt-4">Detalles</h4>

@if (detalles != null && detalles.Any())
{
    <table class="table table-dark table-bordered text-light">
        <thead>
            <tr>
                <th>Producto</th>
                <th>Cantidad</th>
                <th>Precio Unitario</th>
                <th>Total</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var d in detalles)
            {
                <tr>
                    <td>@(d.Producto?.ProductoNombre ?? "Sin producto")</td>
                    <td>@d.Cantidad</td>
                    <td>₡@(d.Cantidad > 0 ? (d.PrecioTotal / d.Cantidad) : d.PrecioTotal)</td>
                    <td>₡@d.PrecioTotal</td>
                </tr>
            }
        </tbody>
    </table>
}
else
{
    <p class="text-warning">No hay detalles registrados para esta venta.</p>
}
